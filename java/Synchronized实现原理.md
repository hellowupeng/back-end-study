# synchronized

## 一、synchronized锁

java关键字，可以用于修饰类的实例方法、静态方法和代码块。

synchronized实例方法保护的是当前实例对象this，this对象有一个锁和一个等待队列，锁只能被一个线程持有，其他试图获得同样锁的线程需要等待。

执行synchronized实例方法的过程大致是：

1）尝试获取锁，如果能够获得锁，继续下一步，否则加入等待队列，阻塞并等待唤醒。

2）执行实例方法体代码。

3）释放锁，如果等待队列上有等待的线程，从中取一个并唤醒，如果有多个等待的线程，唤醒哪一个是不一定的，不保证公平性。

线程不能获得锁时，会加入等待队列等待，线程状态会变为BLOCKED。

对静态方法，保护的是类对象。synchronized静态方法和synchronized实例方法保护的是不同的对象，不同的两个线程。

synchronized是一种互斥锁。一次只允许一个线程访问同步代码。

可重入性、内存可见性。

## 二、synchronized实现原理

